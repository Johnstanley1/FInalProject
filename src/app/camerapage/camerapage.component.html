<!--
Programming Mobile Apps
Authors: Johnstanley Ajagu,
         Will Smith
Student ID: 8864315,
            88*****
-->

<div class="m-4">
  <div class="card">
    <div class="card-header text-center">
      <h2>Add Photo</h2>
    </div>
    <div class="text-center m-3">
      <app-camera></app-camera>
    </div>
    <div class="card-body">
      <form [formGroup]="photoForm">
        <div class="mb-3">
          <label for="photoName">Photo Name</label>
          <input id="photoName" type="text" class="form-control" formControlName="_photoName">

          @if (refName.invalid && (refName.touched || refName.dirty)){
            @if(refName.errors?.['required']){
              <small class="text-danger">Name is required</small><br>
            }
            @if(refName.errors?.['minlength']){
              <small class="text-danger">Name must be at least {{Min_Length}} char long</small><br>
            }
            @if(refName.errors?.['maxlength']){
              <small class="text-danger">Name must be at most {{Max_length}} char long</small><br>
            }
          }

        </div>
        <div class="mb-3">
          <label for="dateCaptured">Date Captured</label>
          <input id="dateCaptured" type="date" class="form-control" formControlName="_dateCaptured">

          @if (refDateCaptured.invalid && (refDateCaptured.touched || refDateCaptured.dirty)){
            @if(refDateCaptured.errors?.['required']){
              <small class="text-danger">Captured date is required</small><br>
            }
          }

        </div>
        <div class="mb-3">
          <label for="dateAdded">Date Added</label>
          <input id="dateAdded" type="date" class="form-control" formControlName="_dateAdded">

          @if (refDateAdded.invalid && (refDateAdded.touched || refDateAdded.dirty)){
            @if(refDateAdded.errors?.['required']){
              <small class="text-danger">Added date is required</small><br>
            }
          }

        </div>
        <form [formGroup]="tagForm">
          <div class="mb-3">
            <label for="tagName">Tag</label>
            <input id="tagName" type="text" class="form-control" formControlName="_tagName">
            <div class="row">
              <div class="col-3 mt-3">
                <button type="submit" class="btn btn-outline-info container-fluid" (click)="btnAddTag_click()">Add Tag</button>
              </div>
            </div>
            @if (refTag.invalid && (refTag.touched || refTag.dirty)){
              @if(refTag.errors?.['required']){
                <small class="text-danger">Please enter photo tag</small><br>
              }
              @if(refTag.errors?.['maxlength']){
                <small class="text-danger">Name must be at most {{Max_length}} char long</small><br>
              }
            }
          </div>
          <div class=" mb-1" *ngFor="let tag of tags; let i = index" >
            <div class="row">
              <div class="col">
                <input type="text" class="col-4 form-control mb-1"  value="{{tag}}" readonly>
              </div>
              <div class="col">
                <button type="submit" class="btn btn-danger" (click)="deleteTag(i)">Delete</button>
              </div>
            </div>
          </div>
        </form>

<!--        <div class="mb-3">-->
<!--          <label for="photoTag">Tag</label>-->
<!--          <input id="photoTag" class="form-control" formControlName="_photoTag">-->
<!--          <div class="text-center m-3 col-3">-->
<!--            <button type="button" class="btn btn-outline-info container-fluid" (click)="btnAddTags_click()">Add Tags</button>-->
<!--          </div>-->
<!--          <ul>-->
<!--            <li *ngFor="let tag of tag">{{tag.name}}</li>-->
<!--          </ul>-->
<!--          -->
<!--        </div>-->
        <div class="mb-3">
          <div class="form-check form-switch form-check-reverse">
            <input class="form-check-input" type="checkbox" id="favouritePhoto"  formControlName="_favouritePhoto">
            <label class="form-check-label" for="favouritePhoto">Favourite</label>
          </div>
          <div class="form-check form-switch form-check-reverse">
            <input class="form-check-input" type="checkbox" id="hidePhoto" formControlName="_hidePhoto">
            <label class="form-check-label" for="hidePhoto">Hide Photo</label>
          </div>
        </div>
        <div class="text-center m-3">
          <app-maplocation></app-maplocation>
        </div>
        <div class="text-center d-grid gap-2 m-3 col-3 mx-auto">
          <button type="submit" class="btn btn-outline-info container-fluid" (click)="btnAdd_click()">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>


